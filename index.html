<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tambola 1.0.0</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #ece9e6, #ffffff);
      padding: 20px;
      position: relative;
    }
    h1 { font-size: 2rem; text-align: center; margin-bottom: 20px; }
    #current { font-size: 2.5rem; font-weight: bold; color: #0077b6; margin-bottom: 15px; transition: font-size 0.3s; }
    #board .cell {
      padding: 12px;
      background: white;
      border-radius: 10px;
      font-size: 1.2rem;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
      transition: 0.3s;
    }
    #board .cell:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    }
    .called {
      background: #2a9d8f !important;
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transform: scale(1.2);
      font-size: 1.4rem;
      transition: transform 0.3s, font-size 0.3s;
    }
    #resetBtn {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    #winners input {
      text-align: right;
    }
  </style>
</head>
<body>

  <h1>Lets play Tambola ðŸŽ¯</h1>
  <button id="resetBtn" class="btn btn-danger" onclick="resetGame()">Reset Game</button>

  <div class="container">
    <div class="row justify-content-center mb-3">
      <!-- Winners panel -->
      <div class="col-12 col-md-3 bg-light p-3 rounded shadow-sm d-flex flex-column justify-content-center">
        <div class="mb-2 d-flex justify-content-between">
          <span>First Row:</span> <input type="text" id="firstRow" class="form-control form-control-sm" placeholder="Enter name">
        </div>
        <div class="mb-2 d-flex justify-content-between">
          <span>Second Row:</span> <input type="text" id="secondRow" class="form-control form-control-sm" placeholder="Enter name">
        </div>
        <div class="mb-2 d-flex justify-content-between">
          <span>Third Row:</span> <input type="text" id="thirdRow" class="form-control form-control-sm" placeholder="Enter name">
        </div>
        <div class="mb-2 d-flex justify-content-between">
          <span>Full House:</span> <input type="text" id="fullHouse" class="form-control form-control-sm" placeholder="Enter name">
        </div>
      </div>

      <!-- Current number & next button -->
      <div class="col-12 col-md-3 text-center">
        <h2 id="current">Press Start</h2>
        <button class="btn btn-primary mb-3" onclick="callNumber()">Next Number</button>
      </div>
    </div>

    <!-- Board -->
    <div id="board" class="d-grid gap-2 mx-auto" style="grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); max-width: 650px;"></div>
  </div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const numbers = Array.from({ length: 90 }, (_, i) => i + 1);
    let called = JSON.parse(localStorage.getItem('calledNumbers') || '[]');

    ['firstRow','secondRow','thirdRow','fullHouse'].forEach(id => {
      const input = document.getElementById(id);
      input.value = localStorage.getItem(id) || '';
      input.addEventListener('input', () => { localStorage.setItem(id, input.value); });
    });

    function createBoard() {
      const board = document.getElementById('board');
      numbers.forEach(num => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.id = 'num-' + num;
        cell.textContent = num;
        board.appendChild(cell);
      });
    }

    function applyMemory() {
      called.forEach(n => {
        const el = document.getElementById('num-' + n);
        if (el) el.classList.add('called');
      });
      if (called.length > 0) {
        document.getElementById('current').textContent = 'Last: ' + called[called.length - 1];
      }
    }

    function callNumber() {
      const remaining = numbers.filter(n => !called.includes(n));
      if (remaining.length === 0) {
        document.getElementById('current').textContent = 'Game Finished! ðŸŽ‰';
        return;
      }
      const next = remaining[Math.floor(Math.random() * remaining.length)];
      called.push(next);
      localStorage.setItem('calledNumbers', JSON.stringify(called));
      document.getElementById('current').textContent = 'Number: ' + next;
      document.getElementById('num-' + next).classList.add('called');
    }

    function resetGame() {
      called = [];
      localStorage.removeItem('calledNumbers');
      document.getElementById('current').textContent = 'Press Start';
      numbers.forEach(n => {
        const el = document.getElementById('num-' + n);
        if (el) el.classList.remove('called');
      });
      ['firstRow','secondRow','thirdRow','fullHouse'].forEach(id => {
        const input = document.getElementById(id);
        input.value = '';
        localStorage.removeItem(id);
      });
    }

    createBoard();
    applyMemory();
  </script>
</body>
</html>
