<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tambola 1.0.0</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #ece9e6, #ffffff);
      padding: 20px;
      position: relative;
    }
    h1 { font-size: 2rem; text-align: center; margin-bottom: 20px; }
    #current { font-size: 4rem; font-weight: bold; color: #0077b6; margin-bottom: 15px; transition: font-size 0.3s; }

    /* Header Section */
    #headerSection {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start; /* stick winners to left */
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
    }

    #winners {
      min-width: 280px; /* slightly wider */
      background: #e3f2fd;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    #winners p {
      margin: 8px 0;
      font-weight: 700;
      font-size: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #winners input {
      width: 120px;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      text-align: right;
    }
    @media (max-width: 576px) {
      #winners p { font-size: 0.95rem; }
      #winners input { width: 100px; }
    }

    #currentSection {
      flex: 1 1 300px; /* grow, shrink, min width */
      display: flex;
      flex-direction: column;
      align-items: center; /* center content horizontally */
      justify-content: flex-start;
    }

    /* Board responsiveness */
    #board {
      display: grid;
      gap: 10px;
      margin: 0 auto;
      grid-template-columns: repeat(5, 1fr); /* mobile default */
      max-width: 100%;
    }
    @media (min-width: 576px) { #board { grid-template-columns: repeat(7, 1fr); } }
    @media (min-width: 768px) { #board { grid-template-columns: repeat(10, 1fr); } }

    #board .cell {
      padding: 14px;
      background: white;
      border-radius: 10px;
      font-size: 1.2rem;
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: center;
      transition: 0.3s;
    }
    #board .cell:hover { transform: scale(1.05); box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    .called { background: #2a9d8f !important; color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transform: scale(1.2); font-size: 1.4rem; transition: transform 0.3s, font-size 0.3s; }

    #resetBtn { position: absolute; top: 10px; right: 10px; }
  </style>
</head>
<body>

  <h1>Lets play Tambola ðŸŽ¯</h1>
  <button id="resetBtn" class="btn btn-danger" onclick="resetGame()">Reset Game</button>

  <div id="headerSection">
    <div id="winners">
      <div class="mb-2 d-flex justify-content-between">
        <span>First Row:</span> <input type="text" id="firstRow" class="form-control form-control-sm" placeholder="Enter name">
      </div>
      <div class="mb-2 d-flex justify-content-between">
        <span>Second Row:</span> <input type="text" id="secondRow" class="form-control form-control-sm" placeholder="Enter name">
      </div>
      <div class="mb-2 d-flex justify-content-between">
        <span>Third Row:</span> <input type="text" id="thirdRow" class="form-control form-control-sm" placeholder="Enter name">
      </div>
      <div class="mb-2 d-flex justify-content-between">
        <span>Full House:</span> <input type="text" id="fullHouse" class="form-control form-control-sm" placeholder="Enter name">
      </div>
    </div>

    <div id="currentSection">
      <h2 id="current">Press Start</h2>
      <button class="btn btn-primary mb-3" onclick="callNumber()">Next Number</button>
    </div>
  </div>

  <div id="board"></div>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const numbers = Array.from({ length: 90 }, (_, i) => i + 1);
    let called = JSON.parse(localStorage.getItem('calledNumbers') || '[]');

    ['firstRow','secondRow','thirdRow','fullHouse'].forEach(id => {
      const input = document.getElementById(id);
      input.value = localStorage.getItem(id) || '';
      input.addEventListener('input', () => { localStorage.setItem(id, input.value); });
    });

    function createBoard() {
      const board = document.getElementById('board');
      numbers.forEach(num => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.id = 'num-' + num;
        cell.textContent = num;
        board.appendChild(cell);
      });
    }

    function applyMemory() {
      called.forEach(n => {
        const el = document.getElementById('num-' + n);
        if (el) el.classList.add('called');
      });
      if (called.length > 0) {
        document.getElementById('current').textContent = 'Last: ' + called[called.length - 1];
      }
    }

    function callNumber() {
      const remaining = numbers.filter(n => !called.includes(n));
      if (remaining.length === 0) {
        document.getElementById('current').textContent = 'Game Finished! ðŸŽ‰';
        return;
      }
      const next = remaining[Math.floor(Math.random() * remaining.length)];
      called.push(next);
      localStorage.setItem('calledNumbers', JSON.stringify(called));
      document.getElementById('current').textContent = 'Number: ' + next;
      document.getElementById('num-' + next).classList.add('called');
    }

    function resetGame() {
      called = [];
      localStorage.removeItem('calledNumbers');
      document.getElementById('current').textContent = 'Press Start';
      numbers.forEach(n => {
        const el = document.getElementById('num-' + n);
        if (el) el.classList.remove('called');
      });
      ['firstRow','secondRow','thirdRow','fullHouse'].forEach(id => {
        const input = document.getElementById(id);
        input.value = '';
        localStorage.removeItem(id);
      });
    }

    createBoard();
    applyMemory();
  </script>
</body>
</html>
